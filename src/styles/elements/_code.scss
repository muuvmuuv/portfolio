p code {
  margin: 0 2px;
  padding: 2px 7px;
  border: 1px solid var(--color-dark);
  border-radius: var(--border-radius-sm);
  background: var(--color-09);
  color: var(--color-05);
  font-size: var(--text-sm);
}

.gatsby-highlight {
  margin-bottom: var(--content-margin);
}

code[class*='language-'],
pre[class*='language-'] {
  position: relative;
  margin: 0;
  color: #efd563;
  font-family: var(--font-mono);
  font-size: var(--text-sm);
  line-height: 1.6;
  word-wrap: normal;
  white-space: pre;
  white-space: pre-wrap;
  hyphens: none;
  tab-size: 2;
}

pre > code[class*='language-'] {
  font-size: 1em;
}

pre[class*='language-'],
:not(pre) > code[class*='language-'] {
  display: grid;
  grid-template-areas: 'side code';
  grid-template-columns: auto 1fr;
  background: var(--color-dark);
}

pre[class*='language-'] {
  position: relative;

  code {
    display: block;
    grid-area: code;
    padding: var(--spacing-sm);
    border: 1px solid var(--color-08);
    white-space: pre;
  }
}

// ++++++++++ code hightlight +++++++++++

.gatsby-highlight-code-line {
  display: block;
  position: relative;
  z-index: 0;

  &::before {
    content: '';
    position: absolute;
    z-index: -1;
    width: calc(100% + 26px);
    height: 100%;
    margin-left: -13px;
    border-left: 1px solid var(--color-primary);
    background-color: #{rgba(lighten($color-dark, 20%), 0.2)};
    pointer-events: none;
    user-select: none;
  }
}

.line-numbers .gatsby-highlight-code-line::before {
  width: calc(100% + 64px);
  margin-left: -52px;
}

// ++++++++++ line numbers +++++++++++

pre[class*='language-'].line-numbers {
  counter-reset: linenumber;
}

pre[class*='language-'].line-numbers > code {
  position: relative;
  white-space: inherit;
}

.line-numbers .line-numbers-rows {
  top: 0;
  grid-area: side;
  height: 100%;
  padding: var(--spacing-sm) 0;
  border: 1px solid var(--color-08);
  border-right: 0;
  pointer-events: none;
  user-select: none;
}

.line-numbers-rows > span {
  display: block;
  counter-increment: linenumber;
  pointer-events: none;
}

.line-numbers-rows > span:before {
  content: counter(linenumber);
  display: block;
  padding: 0 var(--spacing-sm);
  color: var(--color-07);
  text-align: right;
}

// ++++++++++ command line prompt +++++++++++

.command-line-prompt {
  display: block;
  margin-right: 1em;
  float: left;
  border-right: 1px solid var(--color-08);
  font-size: 100%;
  letter-spacing: -1px;
  pointer-events: none;
  user-select: none;
}

.command-line-prompt > span:before {
  content: ' ';
  display: block;
  padding-right: 0.8em;
  color: var(--color-06);
}

.command-line-prompt > span[data-user]:before {
  content: '[' attr(data-user) '@' attr(data-host) '] $';
}

.command-line-prompt > span[data-user='root']:before {
  content: '[' attr(data-user) '@' attr(data-host) '] #';
}

.command-line-prompt > span[data-prompt]:before {
  content: attr(data-prompt);
}

// ++++++++++ tokenization +++++++++++

.token.namespace {
  opacity: 0.7;
}
.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
  color: #6f705e;
}
.token.operator,
.token.boolean,
.token.number {
  color: var(--color-05);
}
.token.function {
  color: #1ab3da;
}
.token.attr-name,
.token.string,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string {
  color: #78d888;
}
.token.selector,
.token.inserted {
  color: #a6e22d;
}
.token.atrule,
.token.attr-value,
.token.keyword,
.token.important,
.token.deleted {
  color: #ff3b83;
}
.token.regex,
.token.statement {
  color: #76d9e6;
}
.token.placeholder,
.token.variable {
  color: var(--color-05);
}
.token.important,
.token.statement,
.token.bold {
  font-weight: var(--font-bold);
}
.token.punctuation {
  color: var(--color-05);
}
.token.entity {
  cursor: help;
}
.token.italic {
  font-style: italic;
}

code.language-markup {
  color: #f9f9f9;
}
code.language-markup .token.tag {
  color: #ef3b7d;
}
code.language-markup .token.attr-name {
  color: #a6e22d;
}
code.language-markup .token.attr-value {
  color: #e6d06c;
}
code.language-markup .token.style,
code.language-markup .token.script {
  color: #76d9e6;
}
code.language-markup .token.script .token.keyword {
  color: #76d9e6;
}
